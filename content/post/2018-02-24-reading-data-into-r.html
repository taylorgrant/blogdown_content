---
title: "Reading data into R"
date: '2018-02-24'
slug: reading-data-into-r
categories: ["R"]
tags: ["data ingest"]
---



<p>This is intended to document the many ways of getting data into R. Here, I want to showcase how data can be read the data into a session from various sources, without having to download a csv file first. We’ll do it all in one step.</p>
<div id="built-in-data-sets" class="section level2">
<h2>Built in data sets</h2>
<p>There are so many packages that come with datasets, it can be hard to keep track of all of them. While there isn’t any one site that keeps track of all of them, Vincent Arel-Bundock has built out a pretty detailed composite of a lot of them <a href="https://vincentarelbundock.github.io/Rdatasets/datasets.html">here</a>.</p>
<p>As an example, let’s load the airquality dataset and investigate the effects of ozone on air temperature.</p>
<pre class="r"><code>data(airquality) 

ggplot(airquality, aes(x = Ozone, y = Temp)) + 
  geom_point(col = &quot;dodgerblue&quot;) + 
  facet_grid(~Month) + 
  geom_smooth(method = &#39;lm&#39;) + 
  theme_minimal()</code></pre>
<p><img src="/post/2018-02-24-reading-data-into-r_files/figure-html/airquality-1.png" width="672" /></p>
</div>
<div id="reading-in-data-from-a-url" class="section level2">
<h2>Reading in data from a URL</h2>
<p>As it has become the convention that data should be shared publicly, there are lots of wonderful places to find data online. For instance, here is one <a href="https://github.com/caesar0301/awesome-public-datasets">great collection</a> of data sources. An easy source for good data is the <a href="https://github.com/fivethirtyeight/data">FiveThirtyEight</a> data page on github, which provides data for all of their articles.</p>
<p>Any csv that has a direct link to it can be downloaded using the <code>readr</code> package. In this case, we’ll read in the raw csv used for their <a href="https://fivethirtyeight.com/features/fandango-movies-ratings/">Fandango piece</a> and recreate a version of their data viz.</p>
<pre class="r"><code>fan &lt;- read_csv(&quot;https://raw.githubusercontent.com/fivethirtyeight/data/master/fandango/fandango_score_comparison.csv&quot;)

starseq &lt;- data.frame(Site = c(rep(&quot;Fandango_Stars&quot;,10), rep(&quot;IMDB_norm_round&quot;,10),
                               rep(&quot;Metacritic_norm_round&quot;,10), rep(&quot;RT_norm_round&quot;, 10)),
                               Stars = rep(seq(0.5,5,.5), 4))

fan %&gt;% gather(&quot;Site&quot;, &quot;Stars&quot;, c(7,14,16,18)) %&gt;%
  select(Site, Stars) %&gt;% group_by(Site, Stars) %&gt;% tally %&gt;% 
  mutate(frac = n / nrow(fan)) %&gt;% right_join(starseq) %&gt;%
  mutate(frac = ifelse(is.na(frac), 0, frac)) %&gt;%
  ggplot(aes(x = Stars, y = frac, group = Site)) + 
  # geom_area(stat = &quot;identity&quot;, position = &quot;stack&quot;) + 
  geom_ribbon(aes(ymin = 0, ymax = frac, group = Site), fill = &quot;gray&quot;,
              alpha = .6) + 
    geom_line(aes(col = Site)) + 
  scale_y_continuous(labels = scales::percent) +
  scale_color_manual(values = c(&quot;red&quot;, &quot;blue&quot;, &quot;purple&quot;, &quot;#3F3F3F&quot;),
                     labels = c(&quot;Fandango&quot;, &quot;IMDB&quot;, 
                                &quot;Metacritic&quot;, &quot;Rotten Tomatoes&quot;)) + 
  theme_minimal() + 
    theme(legend.position = &quot;bottom&quot;) + 
  labs(x = &quot;Stars&quot;, y = &quot;&quot;, 
       title = &quot;Fandango LOVES Movies&quot;)</code></pre>
<p><img src="/post/2018-02-24-reading-data-into-r_files/figure-html/fandango-1.png" width="672" /></p>
</div>
