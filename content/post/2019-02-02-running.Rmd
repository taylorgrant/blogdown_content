---
title: Running
author: ''
date: '2019-02-02'
slug: running
categories:
  - R
  - analysis
tags:
  - highcharter
thumbnailImagePosition: left
thumbnailImage: https://res.cloudinary.com/dn83gtg0l/image/upload/v1549156087/running.jpg
summary: "Using `rStrava` and `highcharter` to track my running over time"
output:
  blogdown::html_page:
    toc: true
---

```{r setup, include=FALSE}
pacman::p_load(tidyverse, janitor, highcharter, here)

strava <- readRDS(here("static", "data", "running", "strava.RDS"))

strava_19 <- strava %>%
  filter(year == 2019)
strava_18 <- strava %>%
  filter(year == 2018)
strava_17 <- strava %>%
  filter(year == 2017)
```

# 2019 
## `r round(sum(strava_19$distance), 1)` Miles

```{r, echo = FALSE}

hchart(strava_19, "heatmap", hcaes(x = month, y = week_ct, value = round(distance, 2))) %>% 
  hc_colorAxis(minColor = "#d9d9d9", maxColor = "#238b45") %>% 
  hc_xAxis(title = list(text = "")) %>%
  hc_yAxis(title = list(text = "Week of Month"),
           reversed = TRUE,
           plotLines = list(
             list(color = "#003366",
                  width = 4,
                  value = 100))) %>%
  hc_legend(layout = "vertical", verticalAlign = "top",
            align = "right", valueDecimals = 0) %>%
  hc_tooltip(useHTML = TRUE, headerFormat = "",
             pointFormat = "Week of: {point.week} <br>
             Miles: {point.distance:.1f} <br>",
             shared = FALSE, style = list(pointerEvents = 'auto'))

```

# 2018 
## `r round(sum(strava_18$distance), 1)` Miles

```{r, echo = FALSE}

hchart(strava_18, "heatmap", hcaes(x = month, y = week_ct, value = round(distance, 2))) %>% 
  hc_colorAxis(minColor = "#d9d9d9", maxColor = "#238b45") %>% 
  hc_xAxis(title = list(text = "")) %>%
  hc_yAxis(title = list(text = "Week of Month"),
           reversed = TRUE,
           plotLines = list(
             list(color = "#003366",
                  width = 4,
                  value = 100))) %>%
  hc_legend(layout = "vertical", verticalAlign = "top",
            align = "right", valueDecimals = 0) %>%
  hc_tooltip(useHTML = TRUE, headerFormat = "",
             pointFormat = "Week of: {point.week} <br>
             Miles: {point.distance:.1f} <br>",
             shared = FALSE, style = list(pointerEvents = 'auto'))

```

# 2017 
## `r round(sum(strava_17$distance), 1)` Miles

```{r, echo = FALSE}

hchart(strava_17, "heatmap", hcaes(x = month, y = week_ct, value = round(distance, 2))) %>% 
  hc_colorAxis(minColor = "#d9d9d9", maxColor = "#238b45") %>% 
  hc_xAxis(title = list(text = "")) %>%
  hc_yAxis(title = list(text = "Week of Month"),
           reversed = TRUE,
           plotLines = list(
             list(color = "#003366",
                  width = 4,
                  value = 100))) %>%
  hc_legend(layout = "vertical", verticalAlign = "top",
            align = "right", valueDecimals = 0) %>%
  hc_tooltip(useHTML = TRUE, headerFormat = "",
             pointFormat = "Week of: {point.week} <br>
             Miles: {point.distance:.1f} <br>",
             shared = FALSE, style = list(pointerEvents = 'auto'))

```